!function(){"use strict";var e=window.wp.element,t=window.React;async function a(e,t){const s=await async function(e,t){const a=new FormData;a.append("action","wait_for_payment"),a.append("url",window.location.href),a.append("nonce",swishWaitPageData.nonce);try{const s=await fetch(swishWaitPageData.ajaxUrl,{method:"POST",body:a,credentials:"same-origin"}),n=await s.json();return e(n.message),t(n.status),"WAITING"!==n.status&&("PAID"===n.status?setTimeout((()=>{window.location.replace(n.redirect_url)}),1e3):window.location.replace(n.redirect_url)),n.status}catch(t){return console.error("Error:",t),e(t),"ERROR"}}(e,t);"WAITING"===s&&setTimeout((()=>a(e,t)),1e3)}function s(){const[s,n]=(0,t.useState)("WAITING"),[i,o]=(0,t.useState)(swishWaitPageData.initialMessage),[r]=(0,t.useState)(swishWaitPageData.swishFullLogo);return(0,t.useEffect)((()=>{const e=()=>{document.hidden||"WAITING"!==s||console.log("Visibility change detected. Checking payment status.")};return a(o,n),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[s]),(0,e.createElement)("div",{className:"swish_container"},(0,e.createElement)("div",{className:"swish-messages-internal swish-centered-internal"},(0,e.createElement)("h1",null,(0,e.createElement)("p",{className:"swish-status-new",id:"swish-status"},i)),(0,e.createElement)("div",{className:"swish-logo swish-centered-internal swish-logo-internal"},(0,e.createElement)("img",{src:r,alt:"Swish Logo"})),swishWaitPageData.showGotoSwishButton&&(0,e.createElement)("div",{className:"swish-button-internal swish-notwaiting"},(0,e.createElement)("a",{href:swishWaitPageData.swishRedirectUrl,className:"button gotoswish"},swishWaitPageData.showGotoSwishButtonText))))}function n(){swishWaitPageData.willRedirect&&window.location.replace(swishWaitPageData.swishRedirectUrl)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{(0,e.render)((0,e.createElement)(s,null),document.getElementById("swish-wait-page-root")),n()})):((0,e.render)((0,e.createElement)(s,null),document.getElementById("swish-wait-page-root")),n())}();