!function(){"use strict";var e=window.wp.element,t=window.wc.wcBlocksRegistry,s=window.wp.i18n,n=(window.React,window.wc.wcSettings);const o=()=>{const e=(0,n.getSetting)("swish_data",null);if(console.log("swishServerData",e),!e)throw new Error("Swish initialization data is not available");return e};window.wp.components;const a={style:{base:{iconColor:"#666EE8",color:"#31325F",fontSize:((e,t,s)=>{let n={};if("object"==typeof document&&"function"==typeof document.querySelector&&"function"==typeof window.getComputedStyle){const e=document.querySelector(".wc-block-checkout");e&&(n=window.getComputedStyle(e))}return n.fontSize||"16px"})(),lineHeight:1.375,"::placeholder":{color:"#fff"}}},classes:{focus:"focused",empty:"empty",invalid:"has-error"}},r=t=>{const{className:s,label:n,id:o,value:a,placeholder:r,onChange:l}=t;return(0,e.createElement)("input",{className:s,label:n,id:o,placeholder:r,value:a,onChange:e=>{l(e.target.value)}})},l=t=>{let{inputErrorComponent:n,onChange:l,paymentRequestData:i,setPayerAlias:c,payerAlias:m,showWaitModal:p}=t;const[u,w]=(0,e.useState)(!0),{options:h,onActive:d,error:y,setError:g}=(t=>{const[s,n]=(0,e.useState)(!1),[o,r]=(0,e.useState)({...a}),[l,i]=(0,e.useState)("");return(0,e.useEffect)((()=>{const e=s?"#CFD7E0":"#fff";r((t=>({...t,style:{...t.style,base:{...t.style.base,"::placeholder":{color:e}}}})))}),[s]),{options:o,onActive:(0,e.useCallback)((e=>{n(!e||(e=>!e))}),[n]),error:l,setError:i}})(),{logoText:E,logoImage:S,placeholder:b,label:f,m_payment:v,description:C}=o();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"wc-swish-inline-element",id:"swish-description"},C),!v&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"wc-block-gateway-container wc-inline-card-element"},(0,e.createElement)(r,{id:"wc-swish-inline-element",className:"wc-block-gateway-input",value:m,options:h,placeholder:b,onBlur:()=>d(u),onFocus:()=>d(u),onChange:e=>{w(0===e.length),isNaN(e)?e.length>0&&"+"!=e.charAt(0)||isNaN(e.slice(1))?(g((0,s.__)("Use numbers and + only","woo-swish-e-commerce")),e=e.slice(0,-1)):g(""):e.length>0&&"0"!==e.charAt(0)&&"+"!==e.charAt(0)?(g((0,s.__)("First character in the number must be 0 or +","woo-swish-e-commerce")),e=e.slice(0,-1)):g(""),c(e),l(e)}}),(0,e.createElement)("label",{htmlFor:"wc-swish-inline-element"},f)),(0,e.createElement)(n,{errorMessage:y})))},i=({eventRegistration:t,emitResponse:n,billing:o,components:a})=>{const{ValidationInputError:r}=a,[i,c]=(0,e.useState)(""),[m,p]=(0,e.useState)(!1),[u,w]=(0,e.useState)(""),h=((t,n,o,a,r,l,i,c,m)=>{const[p,u]=(0,e.useState)(""),w=(0,e.useCallback)((e=>{var t;const{type:n,code:o="",message:a}=e,r=null!==(t=((e,t="")=>e===errorTypes.API_ERROR?getMessageString(t):(0,s.__)("Unable to process your Swish payment, please try again or use alternative method.","woo-swish-e-commerce"))(n,o))&&void 0!==t?t:a;return u(r),r}),[]),{onCheckoutFail:h,onPaymentSetup:d}=t;return((t,s)=>{(0,e.useEffect)((()=>s((()=>(console.log("usePaymentProcessing, onPaymentSetup"),{type:"success",meta:{paymentMethodData:{"swish-payer-alias":t}}})))),[s,t])})(l,d),(0,e.useEffect)((()=>h((({processingResponse:e})=>!e?.paymentDetails?.errorMessage||{type:n.responseTypes.ERROR,message:e.paymentDetails.errorMessage,messageContext:n.noticeContexts.PAYMENTS}))),[h,n.noticeContexts.PAYMENTS,n.responseTypes.ERROR]),w})(t,n,0,0,0,u);return(0,e.createElement)(l,{showWaitModal:m,id:"swish-number",value:u,paymentRequestData:!0,setPayerAlias:w,payerAlias:u,onChange:e=>{e.error&&h(e),c("")},inputErrorComponent:r})};var c=window.wp.htmlEntities;const m=o(),p={name:"swish",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,a=o()?.icon,r=o()?.title,l=(0,e.createElement)("img",{src:a,alt:(0,c.decodeEntities)((0,s.__)("Swish","woo-swish-e-commerce")),align:"right"});return(0,e.createElement)("span",{className:"wc-swish-label-container",style:{width:"98%",display:"block"}},(0,e.createElement)(n,{text:r}),l)}),{props:!0}),content:(0,e.createElement)(i,{props:!0}),edit:(0,e.createElement)(i,{props:!0}),canMakePayment:()=>!0,ariaLabel:(0,s.__)("Swish payment method","woo-swish-e-commerce"),supports:{features:m.supports},paymentMethodId:"swish"};(0,t.registerPaymentMethod)(p)}();